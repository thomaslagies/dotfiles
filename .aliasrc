alias .....='cd ../../../../'
alias ....='cd ../../../'
alias ...='cd ../../'
alias ..='cd ..'
alias .='code-fn'
alias c='clear'
alias dco=docker-compose
alias doc=docker-compose
alias grep='grep --color=auto'
alias kc=kubectl
alias ll='ls -hNla --color=auto --group-directories-first'
alias ls='ls --color=auto'
alias nr='npm run'
alias pp='curl --max-time 5 -s parrot.live'
alias r='exec zsh'
alias stats=bpytop
alias tf=terraform
alias wp='nitrogen ~/git/dotfiles/wallpapers --random --set-zoom-fill'

function mock {
  MOCK=$(node -p "process.argv.slice(1).map(w => w.split('').map((c)=>Math.random()<=0.5?c.toUpperCase():c.toLowerCase()).join('')).join(' ')" $*)
  echo $MOCK
  echo $MOCK | xclip -selection clipboard
}

function code-fn {
  rm -rf ~/.config/Code/Workspaces
  code .
}

function co {
  for handle in "$@"
  do
    echo "Co-authored-by: $handle <$handle@users.noreply.github.com>"
  done
} 

function pkey  {
  cat ~/.ssh/id_rsa.pub | xclip -selection clipboard
}

function dwipe {
  echo "Stopping and removing all containers"
  docker kill $(docker container ls -aq)
  echo "Removing all stopped containers, networks, dangling images and build cache"
  docker system prune --force --volumes
}

function iwipe {
  echo "Removing all images"
	docker image prune -a -f
}

# Set Kubernetes client to new context
function kcctx {
  if [ -n "$1" ]; then
    selection="$1"
    if [[ $selection =~ ^[0-9]+$ ]]; then
      # Line number entered, get context from that line
      selection=$(kubectl config get-contexts -o name --no-headers | sed "${selection}q;d")
    fi
    kubectl config use-context "${selection}"
  else
    kubectl config get-contexts --no-headers | tr -s " " | cut -d " " -f1,2,5 | sed 's/ / | /g' | sed -e 's/^ \| /  | /g' | nl -n rn -w 3 -s ' '
  fi
}

function testjob {
  bytes=`expr 1024 \* 1024 \* ${1:-1}`
  printer=${2:-printer1}
  rlpr -Hlocalhost -P$printer --verbose <<< `cat /dev/urandom | base64 | head -c $bytes`
}

function update-node {
  GITHUB_TOKEN=${GITHUB_TOKEN:-`grep authToken $HOME/.npmrc | sed -r 's|//npm.pkg.github.com/:_authToken=(.*)$|\1|'`}
  NODE_VERSION=`curl -sf -H 'Cache-Control: no-cache' "https://$GITHUB_TOKEN@raw.githubusercontent.com/sealsystems/generator-seal-node/master/lib/constants.js" | grep "NODE_VERSION" | cut -f2 -d"'"`
  [ $NODE_VERSION ]
  nvm install --default $NODE_VERSION || echo "NODE_VERSION not found, invalid GITHUB_TOKEN?"
}
